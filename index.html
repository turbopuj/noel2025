<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Memory de No√´l Collaboratif</title>
  <style>
:root {
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);
  --color-green-500: rgba(34, 197, 94, 1);
  --color-yellow-500: rgba(234, 179, 8, 1);

  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-red-500-rgb: 192, 21, 47;
  --color-green-500-rgb: 34, 197, 94;
  --color-yellow-500-rgb: 234, 179, 8;

  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-error: var(--color-red-500);
  --color-success: var(--color-green-500);
  --color-warning: var(--color-yellow-500);

  --font-family-base: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;

  --space-4: 4px;
  --space-8: 8px;
  --space-12: 12px;
  --space-16: 16px;
  --space-24: 24px;
  --space-32: 32px;

  --radius-base: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;

  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);

  --christmas-red: #c1272d;
  --christmas-green: #165b33;
  --christmas-gold: #ffd700;
}
@media (prefers-color-scheme: dark) {
  :root {
    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(167, 169, 169, 0.7);
    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-border: rgba(119, 124, 124, 0.3);
    --color-error: var(--color-red-400);
  }
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: var(--font-family-base);
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  color: var(--color-text);
  padding: var(--space-16);
  overflow-x: hidden;
}
.container {
  max-width: 600px; margin: 0 auto; background: var(--color-surface);
  border-radius: var(--radius-xl); box-shadow: var(--shadow-lg); padding: var(--space-24);
}
.header { text-align: center; margin-bottom: var(--space-24); }
.header h1 {
  font-size: var(--font-size-3xl); color: var(--christmas-red);
  margin-bottom: var(--space-8); display: flex; align-items: center; justify-content: center; gap: var(--space-8);
}
.stats {
  display: flex; justify-content: space-around; margin-bottom: var(--space-24);
  padding: var(--space-16); background: rgba(var(--color-teal-500-rgb), 0.1); border-radius: var(--radius-base);
}
.stat { text-align: center; }
.stat-value { font-size: var(--font-size-2xl); font-weight: 600; color: var(--color-primary); }
.stat-label { font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-top: var(--space-4); }

/* Timer sp√©cial */
.timer-display {
  text-align: center; margin-bottom: var(--space-16); padding: var(--space-16);
  background: rgba(var(--color-yellow-500-rgb), 0.2); border: 2px solid var(--color-warning);
  border-radius: var(--radius-base); font-size: var(--font-size-2xl); font-weight: 600;
  color: var(--color-warning);
}
.timer-display.expired { background: rgba(var(--color-red-500-rgb), 0.2); border-color: var(--color-error); color: var(--color-error); }

.players { display: flex; justify-content: space-around; margin-bottom: var(--space-24); gap: var(--space-8); }
.player { text-align: center; padding: var(--space-12); border-radius: var(--radius-base); background: var(--color-background); flex: 1; transition: all 0.3s ease; }
.player.active { background: rgba(var(--color-teal-500-rgb), 0.2); border: 2px solid var(--color-primary); }
.player.waiting { opacity: 0.6; }
.player.first { background: rgba(var(--color-yellow-500-rgb), 0.2); border: 2px solid var(--color-warning); }
.player-name { font-weight: 600; margin-bottom: var(--space-4); }
.player-status { font-size: var(--font-size-sm); color: var(--color-text-secondary); }
.player-status.selected { color: var(--color-success); font-weight: 600; }
.player-status.first { color: var(--color-warning); font-weight: 600; }

.grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-12); margin-bottom: var(--space-24); }
@media (min-width: 480px) { .grid { grid-template-columns: repeat(5, 1fr); } }

.card {
  aspect-ratio: 1; border-radius: var(--radius-lg); cursor: pointer; position: relative; transition: all 0.3s ease;
  background: var(--color-background); border: 3px solid var(--color-border);
  overflow: hidden; -webkit-overflow-scrolling: touch; isolation: isolate;
}
.card:hover:not(.revealed):not(.my-selected):not(.disabled) { transform: scale(1.05); box-shadow: var(--shadow-md); }
.card.my-selected { border-color: var(--color-primary); box-shadow: 0 0 0 4px rgba(var(--color-teal-500-rgb), 0.3); transform: scale(1.05); }
.card.my-selected .card-inner { -webkit-transform: rotateY(180deg); transform: rotateY(180deg); transition: transform 0.6s; }
.card.revealed { border-color: var(--color-success); cursor: default; }
.card.revealed .card-inner { -webkit-transform: rotateY(180deg); transform: rotateY(180deg); }
.card.disabled { opacity: 0.5; cursor: not-allowed; }

.card-inner {
  width: 100%; height: 100%; position: relative; -webkit-transform-style: preserve-3d; transform-style: preserve-3d;
  -webkit-transform: translateZ(0); transform: translateZ(0); transition: transform 0.6s;
}
.card-face {
  position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden;
  border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; overflow: hidden;
}
.card-back { background: linear-gradient(135deg, var(--christmas-red), var(--christmas-green)); color: var(--color-white); font-size: var(--font-size-3xl); }
.card-front { -webkit-transform: rotateY(180deg); transform: rotateY(180deg); background: var(--color-white); display: flex; align-items: center; justify-content: center; padding: 6px; }
.card-front img {
  display: block; width: auto; height: auto; max-width: 100%; max-height: 100%; object-fit: contain;
  -webkit-user-drag: none; user-select: none; border-radius: inherit; background: transparent;
}

.message { text-align: center; padding: var(--space-16); border-radius: var(--radius-base); margin-bottom: var(--space-16); font-weight: 500; }
.message.success { background: rgba(var(--color-green-500-rgb), 0.15); color: var(--color-success); border: 2px solid var(--color-success); }
.message.error { background: rgba(var(--color-red-500-rgb), 0.15); color: var(--color-error); border: 2px solid var(--color-error); }
.message.info { background: rgba(var(--color-teal-500-rgb), 0.15); color: var(--color-primary); border: 2px solid var(--color-primary); }
.message.warning { background: rgba(var(--color-yellow-500-rgb), 0.15); color: var(--color-warning); border: 2px solid var(--color-warning); }

.btn { width: 100%; padding: var(--space-16); border: none; border-radius: var(--radius-base); font-size: var(--font-size-lg); font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
.btn-primary { background: var(--color-primary); color: var(--color-white); }
.btn-primary:hover { background: var(--color-primary-hover); transform: translateY(-2px); box-shadow: var(--shadow-md); }
.btn-primary:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

.waiting-screen { text-align: center; padding: var(--space-32); }
.waiting-screen h2 { font-size: var(--font-size-2xl); margin-bottom: var(--space-24); color: var(--color-text); }
.player-list { margin: var(--space-24) 0; }
.player-item {
  display: flex; align-items: center; justify-content: center; gap: var(--space-8);
  padding: var(--space-12); margin: var(--space-8) 0; border-radius: var(--radius-base);
  background: var(--color-background); font-size: var(--font-size-lg);
}
.player-item.ready { background: rgba(var(--color-green-500-rgb), 0.15); }

.confetti { position: fixed; width: 10px; height: 10px; background: var(--christmas-gold); position: absolute; animation: confetti-fall 3s linear; }
@keyframes confetti-fall { to { transform: translateY(100vh) rotate(360deg); opacity: 0; } }

.victory-screen { text-align: center; padding: var(--space-32); }
.victory-screen h2 { font-size: var(--font-size-3xl); color: var(--christmas-red); margin-bottom: var(--space-24); }
.victory-time { font-size: var(--font-size-2xl); color: var(--color-primary); margin-bottom: var(--space-32); font-weight: 600; }

.hidden { display: none !important; }
  </style>
</head>
<body>
  <div class="container">
    <!-- √âcran d'attente -->
    <div id="waitingScreen" class="waiting-screen">
      <div class="header"><h1>üéÑ Memory de No√´l Collaboratif üéÅ</h1></div>
      <h2>Joueurs connect√©s</h2>
      <div class="player-list">
        <div class="player-item" id="playerLeon"><span>üë¶ L√©on</span><span id="statusLeon">‚è≥ En attente...</span></div>
        <div class="player-item" id="playerCapucine"><span>üëß Capucine</span><span id="statusCapucine">‚è≥ En attente...</span></div>
        <div class="player-item" id="playerFirmin"><span>üë¶ Firmin</span><span id="statusFirmin">‚è≥ En attente...</span></div>
      </div>
      <button class="btn btn-primary" id="readyBtn" disabled>Je suis pr√™t !</button>
      <p style="margin-top: var(--space-16); color: var(--color-text-secondary); font-size: var(--font-size-sm);">En attente des autres joueurs...</p>
    </div>

    <!-- √âcran de jeu -->
    <div id="gameScreen" class="hidden">
      <div class="header"><h1>üéÑ Memory de No√´l üéÅ</h1></div>
      
      <!-- Timer compte √† rebours -->
      <div id="timerDisplay" class="timer-display hidden">
        ‚è±Ô∏è Temps restant: <span id="timerSeconds">10</span>s
      </div>

      <div class="stats">
        <div class="stat"><div class="stat-value" id="foundCount">0/10</div><div class="stat-label">Trouv√©es</div></div>
        <div class="stat"><div class="stat-value" id="gameTimer">0:00</div><div class="stat-label">Temps total</div></div>
      </div>
      
      <div class="players">
        <div class="player" id="leonPlayer"><div class="player-name">üë¶ L√©on</div><div class="player-status" id="leonStatus">En attente...</div></div>
        <div class="player" id="capucinePlayer"><div class="player-name">üëß Capucine</div><div class="player-status" id="capucineStatus">En attente...</div></div>
        <div class="player" id="firminPlayer"><div class="player-name">üë¶ Firmin</div><div class="player-status" id="firminStatus">En attente...</div></div>
      </div>
      
      <div id="messageBox" class="message hidden"></div>
      <div class="grid" id="cardGrid"></div>
      <button class="btn btn-primary hidden" id="resetBtn">Rejouer üîÑ</button>
    </div>

    <!-- √âcran de victoire -->
    <div id="victoryScreen" class="hidden victory-screen">
      <h2>üéâ F√©licitations ! üéâ</h2>
      <p class="victory-time">Temps total : <span id="finalTime">0:00</span></p>
      <p style="font-size: var(--font-size-lg); margin-bottom: var(--space-32); color: var(--color-text);">Vous avez trouv√© toutes les images ensemble ! üéÑ‚ú®</p>
      <button class="btn btn-primary" id="playAgainBtn">Rejouer üîÑ</button>
    </div>
  </div>

  <script type="module">
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyAfiNtWKwVGmKPs0tgicoXwj5nVkhZn9zc",
      authDomain: "noel2025-robert.firebaseapp.com",
      databaseURL: "https://noel2025-robert-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "noel2025-robert",
      storageBucket: "noel2025-robert.firebasestorage.app",
      messagingSenderId: "172876284151",
      app
